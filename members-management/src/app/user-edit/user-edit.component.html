<div class="container-fluid" id="greet">
    <h1 id="addUser">Edit User</h1>
</div>
<div class="container">                                                  
    <div class="container-fluid rounded bg-white mt-5 mb-5 " class="d1">
        <form #f="ngForm" (ngSubmit)="onSubmit(f)" >
            <div class="row" >
                <div class="col-sm-6 border-right" >
                    <div class="ml-3 px-3">
                        <div class="d-flex justify-content-between align-items-center ml-5 mt-4 mb-3" >
                            <h2 style="font-family: 'Poppins', sans-serif;">Edit User</h2>
                        </div>

                        <div class="d-flex flex-column align-items-center text-center" id="imageDiv">
                            <img class="rounded-circle mt-5" *ngIf="!newImg"  width="150px" height="150px" src="{{image}}">
                            <img *ngIf="newImg" class="rounded-circle mt-5"  width="150px" height="150px" src="{{newImage}}">
                            <label class="form-label" for="customFile">only .jpg and .png images allowed</label>
                            <input [disabled]="!isEditModeOn" type="file" style="width: 50%;" (change)="onfileselected($event)" 
                            accept="image/png , image/jpg"  class="form-control" id="customFile" name="image" #img/>
                            <span *ngIf="nonImage"> 
                                <br>
                                <div class="alert alert-danger" style="width: 300px"  role="alert">
                                    Unsupported file
                                </div> 
                            </span>             
                        </div>
                        
                        
                        <div class="mt-3">
                            <label>UserName<span class="redFont">*</span></label>
                            <input [(ngModel)]="username" type="text" disabled class="form-control"  name="username">
                        </div>
                        
                        <div class="row m-0">
                            <div class="col-sm-6 pl-0 pr-1">
                                <label >First Name:<span class="redFont">*</span></label>
                                <input type="text" [(ngModel)]="firstname" disabled class="form-control"  placeholder="firstname" 
                                maxlength="30"  name="firstname">
                            </div>
                            <div class="col-sm-6 p-0">
                                <label>Last name:</label>
                                <input type="text" [(ngModel)]="lastname" disabled class="form-control"  placeholder="" maxlength="30" name="lastname">
                            </div>
                        </div>
                       
                        <div class="form-outline datepicker w-100">
                            <label for="birthdayDate">Birthday:</label>
                            <input type="date" 
                            [disabled]="!isEditModeOn" class="form-control" name="birthday" [(ngModel)]="birthday" id="birthdayDate">
                            <div *ngIf="submitted">
                                <span *ngIf="bdayFail" class="redFont">DOB year invalid</span>
                            </div>
                        </div>    
                        
                        
                        <div class="">
                            <label >Mobile Number:<span class="redFont">*</span></label>
                            <input disabled type="text" class="form-control"
                            placeholder="enter phone number"  [(ngModel)]="mobile" 
                            name="mobile">
                        </div>
                        <div class="">
                            <label >Address :<span class="redFont">*</span></label>
                            <input [disabled]="!isEditModeOn" type="text" class="form-control" maxlength="100" 
                            placeholder="enter address"  required name="address"  [(ngModel)]="addres">
                            <div *ngIf="submitted">
                                <span *ngIf="f.controls['address']?.invalid || f.controls['address'].pristine && f.controls['address'].touched" class="redFont">enter valid address</span>
                            </div>  
                        </div>
                    </div>    
                </div>




                <div class="col-sm-6 border-right" id="leftColumn">
                    <div class="ml-3 px-3">
                        <div class="">
                            <label>zipcode:</label>
                            <input [disabled]="!isEditModeOn" type="text" class="form-control" [pattern]="zipcodePattern"
                             maxlength="20" placeholder="zipcode" [(ngModel)]="zipcode"
                             name="zipcode">
                            <div *ngIf="submitted">
                                <span *ngIf="f.controls['zipcode'].invalid && submitted"  class="redFont">
                                enter valid zipcode</span>
                            </div>  
                        </div>
                        <div class="row m-0">
                            <div class="col-sm-6 pl-0 pr-1 dropdown">
                                <label>Country:</label>
                                <select [(ngModel)]="cntry" [disabled]="!isEditModeOn" placeholder="Country"
                                 class="form-select" (change)="changeCountry($event)" name="country">
                                    <option value="USA">USA</option>
                                    <option value="India">India</option>
                                </select>
                                        
                            </div>
                            <div class="col-sm-6 p-0">
                                <label>State/Region:</label>
                                <select [disabled]="!isEditModeOn" placeholder="State" [(ngModel)]="state" class="form-select" name="state">
                                    <option >--Choose State--</option>
                                    <option *ngFor="let state of states" value="{{state}}">{{state}}</option>
                                </select>
                            </div>
                        </div>    
                      
                        
                        <div class="">
                            <label>Timezone:</label>
                            <select [disabled]="!isEditModeOn"
                             class="form-select" [(ngModel)]="timezone" name="timezone">
                                <option value="AST" >AST</option>
                                <option value="EST">EST</option>
                                <option value="CST">CST</option>
                                <option value="UTC+10">UTC+10</option>
                            </select>
                        </div>
                        <div class="">
                            <label>Locales:</label>
                            <select [disabled]="!isEditModeOn"
                            [(ngModel)]="locale" class="form-select" name="locale">
                                <option selected></option>
                                <option value="us" >en_US</option>
                                <option value="india">kn_IN</option>
                                <option value="ireland">en_IE</option>
                            </select>
                        </div>  
                        
                        <div class="radio">
                            <label>
                                Genders:
                            </label>
                            <br>
                            <label class="g">
                            <input type="radio" disabled [(ngModel)]="gender" name="gender" value="male">
                                Male
                            </label>
                            
                            <label class="g">
                                <input type="radio" disabled [(ngModel)]="gender" name="gender" value="female" style="margin-left: 10px;">
                                Female
                            </label>
                        </div>
                        <div class="">
                            <label >Email ID: <span class="redFont">*</span></label>
                            <input type="text" disabled class="form-control" maxlength="100" 
                            [(ngModel)]="email"
                            placeholder="enter email id"  
                            name="email">
                        </div>

                        <div class="">
                            <label>password:<span class="redFont">*</span></label>
                            <input type="password" disabled class="form-control"
                            placeholder="password"
                            [(ngModel)]="password"
                            name="password" >
                        </div>

                        <div class="">
                            <label>confirm password:<span class="redFont">*</span></label>
                            <input type="password" class="form-control" 
                            disabled PasswordValidator="password" minlength="8"
                             maxlength="20" [(ngModel)]="confirmPassword"
                            placeholder="confirm password"
                             name="confirmpassword" 
                           >
                        </div>
                        
                        <div>
                            
                            <label>Select Roles:<span class="redFont">*</span> </label>
                            <!-- <p-dropdown [disabled]="!isEditModeOn" [options]="roles" [(ngModel)]="selectedRolesCode" name="roles" placeholder="Select role"   optionValue="code" optionLabel="name"></p-dropdown> -->
                            <select [disabled]="!isEditModeOn"
                            [(ngModel)]="userRole" class="form-select" name="roles">
                                <option value="Admin">Admin</option>
                                <option value="ITOuser">ITOuser</option>
                            </select>
                            <div *ngIf="submitted">
                                <span *ngIf="f.controls['roles']?.invalid" class="redFont">Select a roles</span>
                            </div>
                        </div>
                        
                        <div class="dropdown">
                            <label>Status:<span class="redFont">*</span></label>
                            <select [disabled]="!isEditModeOn"
                            [(ngModel)]="status" class="form-select" name="status">
                                <option value="Active">Active</option>
                                <option value="Disabled">Disabled</option>
                            </select>
                        </div>
                    </div>    
                </div>    
            </div>
            
            <div class="container-fluid text-right">
                <hr>
                <button *ngIf="!isEditModeOn" class="btn btn-primary btn-lg m-3" type="submit" (click)="onEdit()" [ngStyle]="{'display': role ==='ITOuser'? 'none':'content'}" >Edit</button>
                <button *ngIf="isEditModeOn" class="btn btn-primary btn-lg m-3" type="submit" [ngStyle]="{'display': role ==='ITOuser'? 'none':'content'}" >Save</button>
                <button *ngIf="isEditModeOn" class="btn btn-primary btn-lg m-3" type="button" (click)="cancel()">Cancel</button>
                <button *ngIf="!isEditModeOn" class="btn btn-primary btn-lg m-3" type="button" (click)="cancel()">Back</button>
            </div>
        </form>  
    </div>
</div>  