<head>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500&display=swap" rel="stylesheet">
</head>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">

<div class="container-fluid"  id="label" style="font-family: 'Noto Sans', sans-serif;">
    
    <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 640 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M144 160c-44.2 0-80-35.8-80-80S99.8 0 144 0s80 35.8 80 80s-35.8 80-80 80zm368 0c-44.2 0-80-35.8-80-80s35.8-80 80-80s80 35.8 80 80s-35.8 80-80 80zM0 298.7C0 239.8 47.8 192 106.7 192h42.7c15.9 0 31 3.5 44.6 9.7c-1.3 7.2-1.9 14.7-1.9 22.3c0 38.2 16.8 72.5 43.3 96c-.2 0-.4 0-.7 0H21.3C9.6 320 0 310.4 0 298.7zM405.3 320c-.2 0-.4 0-.7 0c26.6-23.5 43.3-57.8 43.3-96c0-7.6-.7-15-1.9-22.3c13.6-6.3 28.7-9.7 44.6-9.7h42.7C592.2 192 640 239.8 640 298.7c0 11.8-9.6 21.3-21.3 21.3H405.3zM416 224c0 53-43 96-96 96s-96-43-96-96s43-96 96-96s96 43 96 96zM128 485.3C128 411.7 187.7 352 261.3 352H378.7C452.3 352 512 411.7 512 485.3c0 14.7-11.9 26.7-26.7 26.7H154.7c-14.7 0-26.7-11.9-26.7-26.7z"/></svg>
    <h1 id="header">User List</h1>
    

</div>

<div class="user-list-content">
  
  
  <!-- <p-toast></p-toast> -->
  <!-- <button type="button" pButton pRipple (click)="showSuccess()" label="Success" class="p-button-success mb-2"></button> -->


  <!-- <div class="modal" tabindex="-1" id="popup" #popup>
      <div class="modal-dialog" >
        <div class="modal-content" >
          <div class="modal-header">
            
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="closePopup()"></button>
          </div>
          <div class="modal-body">
            <label> <h5>Enter username:<span style="color: red;">*</span></h5></label>
            <input class="form-control" name="username" #username>
            <label><h5 >Description:</h5></label>
            <textarea class="form-control" type="text" rows="4" style="resize: none;" name="Description" #description></textarea>
          </div>
          
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)="closePopup()" >Close</button>
            <button type="button" class="btn btn-primary" id="ok" (click)="addUser()">Ok</button>
          </div>
        </div>
      </div>
  </div> -->
  <p-confirmDialog header="Confirmation" icon="pi pi-exclamation-triangle"></p-confirmDialog>

  <!-- <button (click)="confirm()" pButton icon="pi pi-check" label="Confirm"></button>     -->




  <div #popup id="primepop">
    <p-dialog header="" [(visible)]="displayResponsive" [breakpoints]="{'960px': '75vw'}" [style]="{width: '600px'}"
        [draggable]="false" [resizable]="false">
        <div class="container text-center" style="width: 70%" *ngIf="userExist">
          <div class="alert alert-danger"  role="alert" >
              Invalid entry
          </div>
        </div>
        <div class="row">
          <div class="col-md-4">
            <label id="d1"><h5 >Enter Username:<span style="color: red;">*</span></h5></label>
          </div>
          <div class="col" id="d2">
            <input class="form-control" name="username" #username>
          </div>
        </div>
        <br><br>
        <div class="row">
          <div class="col-md-4">
            <label id="d3"><h5>Description:</h5></label>
          </div>
          <div class="col" id="d4">
            <textarea class="form-control"  type="text" rows="4" style="resize: none;" name="Description" #description></textarea>
          </div>
        </div>
            <ng-template pTemplate="footer">
            <p-button (click)="displayResponsive=false" label="Cancel" styleClass="p-button-text"></p-button>
            <p-button  (click)="addUser()" label="Ok" styleClass="p-button-text"></p-button>
            </ng-template>
    </p-dialog>
  </div>


  <div class="container-fluid" id='table' >
    <div id="addSection" style="width:100%">
      <div class="row" >
          <div class="col" >
            <p-button (onClick)="showResponsiveDialog()" class="mt-4 mb-2 mr-5"  id="add" icon="pi pi-external-link"
            label="Add+" [disabled]="!permissions.canAdd" [style]="{'margin-right': '30px'}"></p-button>
            <p-dropdown [options]="pageNums" class="mt-4 mb-2 mr-3" id="page" [(ngModel)]="pageNumSelected"
             placeholder="Number of Records" optionLabel="name" (click)="onSelected($event)"></p-dropdown>
            
              <!-- <button class="btn btn-success mt-4 mb-2 mr-5" style="float: right;" id="add" (click)="openPop()" >Add +</button> -->
          </div>
      </div>
      <hr>
  </div>
  
  <div class="grid">
    <div class="col-12">
      <p-table  [value]="fetchedData" [style]="{'padding': '0 10px 0 10px'}"  #dt2 styleClass="p-datatable-striped" [paginator]="isPaginate"  [tableStyle]="{'min-width': '50rem'}" 
      [rows]="rows" [showCurrentPageReport]="true" [(first)]="first"
      [globalFilterFields]="['username','firstname','lastname','email','status','createdate']">  
        <ng-template pTemplate="header"  >
            <tr>
                <th pSortableColumn="username" style="width:15%">Username<p-sortIcon field="username"></p-sortIcon></th>
                <th pSortableColumn="firstname" style="width:15%">First name<p-sortIcon field="firstname"></p-sortIcon></th>
                <th pSortableColumn="lastname" style="width:15%">Last name<p-sortIcon field="lastname"></p-sortIcon></th>
                <th pSortableColumn="email" style="width:15%">Email id<p-sortIcon field="email"></p-sortIcon></th>
                <th pSortableColumn="status" style="width:15%">status<p-sortIcon field="status"></p-sortIcon></th>
                <th pSortableColumn="createdate" style="width:15%">Created Date</th>
                <th></th>
                <th></th>
            </tr>
            <tr>
              <th>
                  <p-columnFilter type="text" field="username"></p-columnFilter>
              </th>
              <th>
                  <p-columnFilter type="text" field="firstname"></p-columnFilter>
              </th>
              <th>
                <p-columnFilter type="text" field="lastname"></p-columnFilter>
              </th>
              <th>
                <p-columnFilter type="text" field="email"></p-columnFilter>
              </th>
              <th>
                <p-columnFilter type="text" field="status"></p-columnFilter>
              </th>
              <!-- <th>
                <p-columnFilter type="text" field="createdate"></p-columnFilter>
              </th> -->
              <th></th>
              <th></th>
              <th></th>
          </tr>
        </ng-template>
          <ng-template pTemplate="body" let-data>
              <tr>
                  <td>{{data.username}}</td>
                  <td>{{data.firstname}}</td>
                  <td>{{data.lastname}}</td>
                  <td>{{data.email}}</td>
                  <td>
                    <span [ngClass]="data.status==='available'?'good':'bad'">{{data.status}}</span>
                  </td>
                  <td>{{data.createdTime | datepipe}}</td>
                  
                  <td><button pButton type="button" routerLink="/main/userEdit" label="Details" [disabled]="!permissions.canEdit" (click)="gotoEdit(data)" class="p-button-info"></button></td>
                  <td><button pButton type="button" [disabled]="!permissions.canDelete" (click)="deleteConfirm(data)" label="" icon="pi pi-trash"></button></td>
                  <!-- <button class="btn btn-info" (click)="details($event)">Details</button> -->
                  
              </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="12" style="text-align:center">No record found.</td>
            </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
    
  </div>  
</div>
